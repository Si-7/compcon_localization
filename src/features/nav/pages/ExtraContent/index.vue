<template>
  <v-card flat tile class="containerCard">
    <v-tabs v-model="tabs" background-color="panel" color="accent" icons-and-text>
      <v-tab>
        Контент Паки
        <v-icon>list_alt</v-icon>
      </v-tab>
      <v-tab>
        Установить контент
        <v-icon>open_in_browser</v-icon>
      </v-tab>
      <v-tab>
        Директория LCP
        <v-icon>mdi-format-list-text</v-icon>
      </v-tab>
    </v-tabs>
    <v-tabs-items v-model="tabs">
      <v-tab-item>
        <v-container>
          <packs-list
            ref="pl"
            @start-load="$refs.mc.loading = true"
            @end-load="$refs.mc.loading = false"
          />
          <missing-content ref="mc" />
        </v-container>
      </v-tab-item>
      <v-tab-item>
        <v-container>
          <pack-install @installed="onInstalled" />
        </v-container>
      </v-tab-item>
      <v-tab-item>
        <v-container>
          <packs-directory />
        </v-container>
      </v-tab-item>
    </v-tabs-items>
  </v-card>
</template>

<script lang="ts">
import Vue from 'vue'
import Component from 'vue-class-component'

import PacksList from './PacksList.vue'
import MissingContent from './MissingContent.vue'
import PackInstall from './PackInstall.vue'
import PacksDirectory from './PacksDirectory.vue'

@Component({
  components: { PacksList, PackInstall, PacksDirectory, MissingContent },
})
export default class ExtraContent extends Vue {
  public tabs = null

  public onInstalled(): void {
    ;(this.$refs.pl as any).reload()
    this.tabs = 0
  }
}
</script>

<style scoped>
.containerCard >>> .v-window__container,
.containerCard >>> .v-window-item {
  height: 100%;
}
</style>
